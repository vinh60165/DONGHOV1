{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import'./FormPage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function FormPage(){const[formData,setFormData]=useState({name:'',email:'',image:''});const[users,setUsers]=useState([]);const[editingId,setEditingId]=useState(null);// Thêm state để biết đang sửa ai\nconst fetchUsers=async()=>{try{const response=await axios.get('http://localhost:3002/product/gets');setUsers(response.data);}catch(error){console.error('Error fetching users:',error);}};useEffect(()=>{fetchUsers();},[]);const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};const handleSubmit=async e=>{e.preventDefault();console.log(editingId);if(editingId){// Nếu đang sửa thì gọi PUT API\ntry{await axios.put(`http://localhost:3002/product/update/${editingId}`,formData);setEditingId(null);// reset trạng thái sửa\nsetFormData({name:'',email:'',image:''});fetchUsers();}catch(error){console.error('Error updating user:',error);}}else{// Nếu không thì gọi POST API để thêm mới\ntry{await axios.post('http://localhost:3002/product/add',formData);setFormData({name:'',email:'',image:''});fetchUsers();}catch(error){console.error('Error adding user:',error);}}};const handleEdit=user=>{setFormData({name:user.name,email:user.email,image:user.image});setEditingId(user.id);// Ghi nhớ đang sửa ai\n};const handleDelete=async id=>{try{await axios.delete(`http://localhost:3002/product/delete//${id}`);fetchUsers();}catch(error){console.error('Error deleting user:',error);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:editingId?'Sửa sản phẩm':'Thêm sản phẩm'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",placeholder:\"T\\xEAn s\\u1EA3n ph\\u1EA9m\",value:formData.name,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"Email\",value:formData.email,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"file\",placeholder:\"file\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:editingId?'Cập nhật':'Thêm sản phẩm'}),editingId&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setEditingId(null);setFormData({name:'',email:'',image:''});},children:\"H\\u1EE7y s\\u1EEDa\"})]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Danh s\\xE1ch s\\u1EA3n ph\\u1EA9m\"}),/*#__PURE__*/_jsxs(\"table\",{border:\"1\",cellPadding:\"10\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Image\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(user=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user.id}),/*#__PURE__*/_jsx(\"td\",{children:user.name}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:user.image?/*#__PURE__*/_jsx(\"img\",{src:user.image,alt:user.name,width:\"100\"}):/*#__PURE__*/_jsx(\"img\",{src:\"path/to/default-image.jpg\",alt:\"Default\",width:\"100\"})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(user),children:\"S\\u1EEDa\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(user.id),children:\"X\\xF3a\"})]})]},user.id))})]})]});}export default FormPage;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","FormPage","formData","setFormData","name","email","image","users","setUsers","editingId","setEditingId","fetchUsers","response","get","data","error","console","handleChange","e","target","value","handleSubmit","preventDefault","log","put","post","handleEdit","user","id","handleDelete","delete","children","onSubmit","type","placeholder","onChange","required","onClick","border","cellPadding","map","src","alt","width"],"sources":["C:/Users/Vinh-PC/Desktop/reactjs/hello-react/src/components/FormPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport './FormPage.css'; \r\n\r\n\r\nfunction FormPage() {\r\n  const [formData, setFormData] = useState({ name: '', email: '', image: '' });\r\n  const [users, setUsers] = useState([]);\r\n  const [editingId, setEditingId] = useState(null);  // Thêm state để biết đang sửa ai\r\n\r\n  const fetchUsers = async () => {\r\n    try {\r\n      const response = await axios.get('http://localhost:3002/product/gets');\r\n      setUsers(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching users:', error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchUsers();\r\n  }, []);\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    console.log(editingId)\r\n    if (editingId) {\r\n      // Nếu đang sửa thì gọi PUT API\r\n      try {\r\n        await axios.put(`http://localhost:3002/product/update/${editingId}`, formData);\r\n        setEditingId(null); // reset trạng thái sửa\r\n        setFormData({ name: '', email: '', image: '' });\r\n        fetchUsers();\r\n      } catch (error) {\r\n        console.error('Error updating user:', error);\r\n      }\r\n    } else {\r\n      // Nếu không thì gọi POST API để thêm mới\r\n      try {\r\n        await axios.post('http://localhost:3002/product/add', formData);\r\n        setFormData({ name: '', email: '', image: '' });\r\n        fetchUsers();\r\n      } catch (error) {\r\n        console.error('Error adding user:', error);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleEdit = (user) => {\r\n    setFormData({ name: user.name, email: user.email, image: user.image });\r\n    setEditingId(user.id); // Ghi nhớ đang sửa ai\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    try {\r\n      await axios.delete(`http://localhost:3002/product/delete//${id}`);\r\n      fetchUsers();\r\n    } catch (error) {\r\n      console.error('Error deleting user:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>{editingId ? 'Sửa sản phẩm' : 'Thêm sản phẩm'}</h2>\r\n      <form onSubmit={handleSubmit}>\r\n        <input\r\n          type=\"text\"\r\n          name=\"name\"\r\n          placeholder=\"Tên sản phẩm\"\r\n          value={formData.name}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <input\r\n          type=\"email\"\r\n          name=\"email\"\r\n          placeholder=\"Email\"\r\n          value={formData.email}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n  \r\n\r\n           <input\r\n          type=\"file\"\r\n          name=\"file\"\r\n          placeholder=\"file\"\r\n          \r\n\r\n          \r\n        />  \r\n   \r\n \r\n\r\n\r\n        <button type=\"submit\">{editingId ? 'Cập nhật' : 'Thêm sản phẩm'}</button>\r\n        {editingId && (\r\n          <button type=\"button\" onClick={() => {\r\n            setEditingId(null);\r\n            setFormData({ name: '', email: '', image: '' });\r\n          }}>Hủy sửa</button>\r\n        )}\r\n      </form>\r\n\r\n      <h2>Danh sách sản phẩm</h2>\r\n      <table border=\"1\" cellPadding=\"10\" >\r\n        <thead>\r\n          <tr>\r\n            <th>ID</th>\r\n            <th>Name</th>\r\n            <th>Email</th>\r\n            <th>Image</th>\r\n            <th>Actions</th>\r\n          </tr>\r\n        </thead>\r\n      <tbody>\r\n  {users.map((user) => (\r\n    <tr key={user.id}>\r\n      <td>{user.id}</td>\r\n      <td>{user.name}</td>\r\n      <td>{user.email}</td>\r\n\r\n      <td>\r\n        {/* Kiểm tra nếu có ảnh */}\r\n        {user.image ? (\r\n          <img src={user.image} alt={user.name} width=\"100\" />\r\n        ) : (\r\n          <img src=\"path/to/default-image.jpg\" alt=\"Default\" width=\"100\" />\r\n        )}\r\n      </td>\r\n      <td>\r\n        <button onClick={() => handleEdit(user)}>Sửa</button>\r\n        <button onClick={() => handleDelete(user.id)}>Xóa</button>\r\n      </td>\r\n    </tr>\r\n  ))}\r\n</tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FormPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}